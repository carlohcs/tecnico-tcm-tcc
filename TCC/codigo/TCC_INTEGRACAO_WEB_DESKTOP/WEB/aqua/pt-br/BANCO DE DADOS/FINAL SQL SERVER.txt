-- BANCO DE DADOS
/*CREATE DATABASE joiandd;

USE joiandd;

--
-- Estrutura da tabela sexo
--

CREATE TABLE  sexo (
  COD_SEX INT NOT NULL IDENTITY(1,1),
  DESC_SEX CHAR(10) DEFAULT NULL,
  PRIMARY KEY (COD_SEX)
)

--
-- Estrutura da tabela estados
--

CREATE TABLE  estados (
  COD_ESTADO INT NOT NULL IDENTITY(1,1),
  DESC_ESTADO VARCHAR(30) NOT NULL,
  SIGL_ESTADO CHAR(2) NOT NULL,
  PRIMARY KEY (COD_ESTADO)
)

--
-- Estrutura da tabela cidades
--

CREATE TABLE  cidades (
  COD_CIDADE INT NOT NULL IDENTITY(1,1),
  DESC_CIDADE VARCHAR(30) DEFAULT NULL,
  COD_ESTADO INT DEFAULT NULL,
  PRIMARY KEY (COD_CIDADE),
  CONSTRAINT FK_COD_ESTADO FOREIGN KEY (COD_ESTADO) REFERENCES estados (COD_ESTADO) ON DELETE CASCADE ON UPDATE CASCADE
)

--
-- Estrutura da tabela titulo_usuario
--

CREATE TABLE  titulo_usuario (
  COD_TIT INT NOT NULL IDENTITY(1,1),
  DESC_TIT CHAR(10) NOT NULL,
  PRIMARY KEY (COD_TIT)
)

CREATE TABLE  usuario (
  COD_USU INT NOT NULL IDENTITY(1,1),
  NOM_USU CHAR(10) NOT NULL,
  SOBRE_USU CHAR(20) DEFAULT NULL,
  EMAIL_USU CHAR(30) DEFAULT NULL,
  LOG_USU CHAR(12) NOT NULL,
  SEN_USU CHAR(32) DEFAULT NULL,
  DT_NASC_USU DATE DEFAULT NULL,
  DT_CADS_USU DATE DEFAULT NULL,
  FT_USU VARCHAR(255) DEFAULT NULL,
  DESC_USU VARCHAR(140) DEFAULT NULL,
  PTS_USU INT DEFAULT '0',
  FLAG_RNSC TINYINT DEFAULT '0',
  FLAG_EMAIL_VIS TINYINT DEFAULT '1',
  FLAG_DTNASC_VIS TINYINT DEFAULT '1',
  COD_TIT_USU INT DEFAULT '1',
  COD_SEX INT DEFAULT '1',
  COD_CIDADE INT DEFAULT NULL,
  COD_ESTADO INT DEFAULT NULL,
  PRIMARY KEY (COD_USU),
  CONSTRAINT FK_COD_CIDADE FOREIGN KEY (COD_CIDADE) REFERENCES cidades (COD_CIDADE),
  CONSTRAINT FK_COD_SEX FOREIGN KEY (COD_SEX) REFERENCES sexo (COD_SEX),
  CONSTRAINT FK_COD_TIT FOREIGN KEY (COD_TIT_USU) REFERENCES titulo_usuario (COD_TIT),
  CONSTRAINT FK_COD_ESTADO_USU FOREIGN KEY (COD_ESTADO) REFERENCES estados (COD_ESTADO)
)

--
-- Estrutura da tabela artigo
--

CREATE TABLE artigo (
  COD_ART INT NOT NULL IDENTITY(1,1),
  TIT_ART CHAR(100) NOT NULL,
  TXT_ART VARCHAR(500) NOT NULL,
  LINK_ART VARCHAR(100) NOT NULL,
  DT_POST_ART DATE NOT NULL,
  HR_POST_ART TIME NOT NULL,
  PTS_ART INT NOT NULL,
  PLV_CHV_ART1 CHAR(10) NOT NULL,
  PLV_CHV_ART2 CHAR(10) NOT NULL,
  PLV_CHV_ART3 CHAR(10) NOT NULL,
  FLAG_ART_AP TINYINT NOT NULL,
  COD_USU INT NOT NULL,
  PRIMARY KEY (COD_ART),
  CONSTRAINT FK_COD_USU_ART FOREIGN KEY (COD_USU) REFERENCES usuario(COD_USU) ON DELETE CASCADE ON UPDATE CASCADE
)

--
-- Estrutura da tabela assunto_contato
--

CREATE TABLE  assunto_contato (
  COD_ASSUNTO INT NOT NULL IDENTITY(1,1),
  DESC_ASSUNTO CHAR(10) DEFAULT NULL,
  PRIMARY KEY (COD_ASSUNTO)
)

-- --------------------------------------------------------

--
-- Estrutura da tabela categoria
--

CREATE TABLE  categoria (
  COD_CTG INT NOT NULL IDENTITY(1,1),
  TIT_CTG CHAR(20) NOT NULL,
  FLAG_MEN TINYINT NOT NULL,
  PRIMARY KEY (COD_CTG)
)



--
-- Estrutura da tabela comentario_artigo
--

CREATE TABLE  comentario_artigo (
  COD_CMT INT NOT NULL IDENTITY(1,1),
  TXT_CMT VARCHAR(140) NOT NULL,
  DT_CMT DATE NOT NULL,
  COD_USU INT NOT NULL,
  COD_ART INT NOT NULL,
  PRIMARY KEY (COD_CMT),
  CONSTRAINT FK_COD_USU_CMT_ART FOREIGN KEY (COD_USU) REFERENCES usuario (COD_USU)  ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT FK_COD_ART_CMT FOREIGN KEY (COD_ART) REFERENCES artigo (COD_ART)
)


--
-- Estrutura da tabela comentario_destaque
--

CREATE TABLE  comentario_destaque (
  COD_CMT INT NOT NULL IDENTITY(1,1),
  TXT_CMT VARCHAR(140) NOT NULL,
  DT_CMT DATE NOT NULL,
  COD_USU INT NOT NULL,
  COD_DEST INT NOT NULL,
  PRIMARY KEY (COD_CMT),
  CONSTRAINT FK_COD_USU_CMT_DEST FOREIGN KEY (COD_USU) REFERENCES usuario(COD_USU) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT FK_COD_DEST_CMT FOREIGN KEY (COD_DEST) REFERENCES destaque(COD_DEST) ON DELETE CASCADE
)


--
-- Estrutura da tabela comentario_noticia
--

CREATE TABLE  comentario_noticia (
  COD_CMT INT NOT NULL IDENTITY(1,1),
  TXT_CMT VARCHAR(140) NOT NULL,
  DT_CMT DATE NOT NULL,
  COD_USU INT NOT NULL,
  COD_NOT INT NOT NULL,
  PRIMARY KEY (COD_CMT),
  CONSTRAINT FK_COD_USU_CMT_NOT FOREIGN KEY (COD_USU) REFERENCES usuario (COD_USU)  ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT FK_COD_NOT_CMT FOREIGN KEY (COD_NOT) REFERENCES noticias (COD_NOT)  ON DELETE CASCADE ON UPDATE CASCADE
)



--
-- Estrutura da tabela contato
--

CREATE TABLE  contato (
  COD_CONT INT NOT NULL IDENTITY(1,1),
  NOME_CONT CHAR(30) NOT NULL,
  EMAIL_CONT CHAR(25) NOT NULL,
  MSG_CONT VARCHAR(500) NOT NULL,
  DATA_CONT DATE DEFAULT NULL,
  HORA_CONT TIME DEFAULT NULL,
  COD_ASSUNTO_CONT INT DEFAULT NULL,
  LIDO_CONT TINYINT DEFAULT NULL,
  PRIMARY KEY (COD_CONT),
  CONSTRAINT FK_COD_ASSUNTO_CONT FOREIGN KEY (COD_ASSUNTO_CONT) REFERENCES assunto_contato (COD_ASSUNTO)
)

-- --------------------------------------------------------

--
-- Estrutura da tabela curtir_artigo
--

CREATE TABLE  curtir_artigo (
  COD_CUR INT NOT NULL IDENTITY(1,1),
  COD_ART INT NOT NULL,
  COD_USU INT NOT NULL,
  PRIMARY KEY (COD_CUR),
  CONSTRAINT FK_COD_ART_CUR FOREIGN KEY (COD_ART) REFERENCES artigo (COD_ART),
  CONSTRAINT FK_COD_USU_CUR FOREIGN KEY (COD_USU) REFERENCES usuario (COD_USU)
)


--
-- Estrutura da tabela destaque
--

CREATE TABLE  destaque (
  COD_DEST INT NOT NULL IDENTITY(1,1),
  TIT_DEST VARCHAR(24) NOT NULL,
  TXT_DEST VARCHAR(500) DEFAULT NULL,
  LINK_DEST VARCHAR(100) NOT NULL,
  DT_DEST DATE NOT NULL,
  HR_DEST TIME NOT NULL,
  FLAG_IMG_DEST TINYINT NOT NULL,
  FLAG_VID_DEST TINYINT NOT NULL,
  FLAG_ANLS_DEST TINYINT NOT NULL,
  PATH_IMG_INI_DEST VARCHAR(100) NOT NULL,
  PATH_IMG1_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG2_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG3_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG4_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG5_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG6_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG7_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG8_DEST VARCHAR(100) DEFAULT NULL,
  PATH_IMG9_DEST VARCHAR(100) DEFAULT NULL,
  LINK1_VID_DEST VARCHAR(100) DEFAULT NULL,
  LINK2_VID_DEST VARCHAR(100) DEFAULT NULL,
  LINK3_VID_DEST VARCHAR(100) DEFAULT NULL,
  LINK4_VID_DEST VARCHAR(100) DEFAULT NULL,
  PRIMARY KEY (COD_DEST)  
)


--
-- Estrutura da tabela enquete
--

CREATE TABLE  enquete (
  COD_ENQ INT NOT NULL IDENTITY(1,1),
  TIT_ENQ CHAR(50) NOT NULL,
  DT_ENQ DATE NOT NULL,
  ITN1_ENQ CHAR(20) DEFAULT NULL,
  ITN2_ENQ CHAR(20) DEFAULT NULL,
  ITN3_ENQ CHAR(20) DEFAULT NULL,
  ITN4_ENQ CHAR(20) DEFAULT NULL,
  PCT_ITN1_ENQ INT DEFAULT NULL,
  PCT_ITN2_ENQ INT DEFAULT NULL,
  PCT_ITN3_ENQ INT DEFAULT NULL,
  PCT_ITN4_ENQ INT DEFAULT NULL,
  FLAG_ENQ_FIN TINYINT DEFAULT NULL,
  PRIMARY KEY (COD_ENQ)
)







--
-- Estrutura da tabela itens_ctg
--

CREATE TABLE  itens_ctg (
  COD_ITN_CTG INT NOT NULL IDENTITY(1,1),
  TIT_ITN_CTG VARCHAR(30) NOT NULL,
  PATH_IMG1_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG2_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG3_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG4_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG5_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG6_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG7_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG8_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  PATH_IMG9_DESC_INT_CTG CHAR(100) DEFAULT NULL,
  LINK_DOWN_INT_CTG VARCHAR(100) DEFAULT 'indisponível',
  SIS_OP_INT_CTG CHAR(20) DEFAULT 'indisponível',
  PROC_INT_CTG CHAR(20) DEFAULT 'indisponível',
  RAM_INT_CTG CHAR(20) DEFAULT 'indisponível',
  HD_INT_CTG CHAR(20) DEFAULT 'indisponível',
  PL_VD_INT_CTG CHAR(20) DEFAULT 'indisponível',
  PL_RD_INT_CTG CHAR(20) DEFAULT 'indisponível',
  LINK1_VD_INT_CTG VARCHAR(100) DEFAULT NULL,
  LINK2_VD_INT_CTG VARCHAR(100) DEFAULT NULL,
  LINK3_VD_INT_CTG VARCHAR(100) DEFAULT NULL,
  DT_INT_CTG DATE DEFAULT NULL,
  FLAG_INT_CTG TINYINT DEFAULT NULL,
  TXT_ITN_CTG VARCHAR(2000) DEFAULT NULL,
  COD_CTG INT DEFAULT NULL,
  PRIMARY KEY (COD_ITN_CTG),
  CONSTRAINT FK_COD_CTG FOREIGN KEY (COD_CTG) REFERENCES categoria (COD_CTG)
)


--
-- Estrutura da tabela noticias
--

CREATE TABLE  noticias (
  COD_NOT INT NOT NULL IDENTITY(1,1),
  TIT_NOT CHAR(50) DEFAULT NULL,
  TXT_NOT VARCHAR(500) DEFAULT NULL,
  LINK_NOT VARCHAR(100) DEFAULT NULL,
  DT_NOT DATE DEFAULT NULL,
  HR_NOT TIME DEFAULT NULL,
  PATH_IMG_INI_NOT VARCHAR(100) DEFAULT NULL,
  PATH_IMG1_NOT VARCHAR(100) DEFAULT NULL,
  PATH_IMG2_NOT VARCHAR(100) DEFAULT NULL,
  PATH_IMG3_NOT VARCHAR(100) DEFAULT NULL,
  PRIMARY KEY (COD_NOT)
)



--
-- Estrutura da tabela publicidade_lateral
--

CREATE TABLE  publicidade_lateral (
  COD_PUB INT NOT NULL IDENTITY(1,1),
  TIT_PUB VARCHAR(30) NOT NULL,
  EMP_PUB VARCHAR(30) NOT NULL,
  DT_PUB DATE NOT NULL,
  VLR_PUB INT NOT NULL,
  LINK_PUB CHAR(100) DEFAULT NULL,
  PATH_IMG_PUB CHAR(100) DEFAULT NULL,
  PRIMARY KEY (COD_PUB)
)



--
-- Estrutura da tabela publicidade_top
--

CREATE TABLE  publicidade_top (
  COD_PUB INT NOT NULL IDENTITY(1,1),
  TIT_PUB VARCHAR(30) NOT NULL,
  EMP_PUB VARCHAR(30) NOT NULL,
  DT_PUB DATE NOT NULL,
  VLR_PUB INT NOT NULL,
  LINK_PUB CHAR(100) DEFAULT NULL,
  PATH_IMG_PUB CHAR(100) DEFAULT NULL,
  PRIMARY KEY (COD_PUB)
)

--
-- Estrutura da tabela sinalizacao_artigo
--

CREATE TABLE  sinalizacao_artigo (
  COD_SIN INT NOT NULL IDENTITY(1,1),
  COD_ART INT NOT NULL,
  COD_USU_SINALIZADO INT NOT NULL,
  COD_USU_SINALIZAR INT NOT NULL,
  COD_CMT INT NOT NULL,
  COD_MTV INT NOT NULL,
  PRIMARY KEY (COD_SIN),
  CONSTRAINT FK_COD_SN_CMT_ART FOREIGN KEY (COD_CMT) REFERENCES comentario_noticia (COD_CMT),
  CONSTRAINT FK_COD_USU_SINALIZADO_ART FOREIGN KEY (COD_USU_SINALIZADO) REFERENCES usuario (COD_USU),
  CONSTRAINT FK_COD_USU_SINALIZAR_ART FOREIGN KEY (COD_USU_SINALIZAR) REFERENCES usuario (COD_USU)
)



--
-- Estrutura da tabela sinalizacao_destaque
--

CREATE TABLE  sinalizacao_destaque (
  COD_SIN INT NOT NULL IDENTITY(1,1),
  COD_DEST INT NOT NULL,
  COD_USU_SINALIZADO INT NOT NULL,
  COD_USU_SINALIZAR INT NOT NULL,
  COD_CMT INT NOT NULL,
  COD_MTV INT NOT NULL,
  PRIMARY KEY (COD_SIN),
  CONSTRAINT FK_COD_SN_CMT_DEST FOREIGN KEY (COD_CMT) REFERENCES comentario_destaque (COD_CMT),
  CONSTRAINT FK_COD_USU_SINALIZADO_DEST FOREIGN KEY (COD_USU_SINALIZADO) REFERENCES usuario (COD_USU),
  CONSTRAINT FK_COD_USU_SINALIZAR_DEST FOREIGN KEY (COD_USU_SINALIZAR) REFERENCES usuario (COD_USU)
)

--
-- Estrutura da tabela sinalizacao_noticia
--

CREATE TABLE  sinalizacao_noticia (
  COD_SIN INT NOT NULL IDENTITY(1,1),
  COD_NOT INT NOT NULL,
  COD_USU_SINALIZADO INT NOT NULL,
  COD_USU_SINALIZAR INT NOT NULL,
  COD_CMT INT NOT NULL,
  COD_MTV INT NOT NULL,
  PRIMARY KEY (COD_SIN),
  CONSTRAINT FK_COD_SN_CMT_NOT FOREIGN KEY (COD_CMT) REFERENCES comentario_noticia (COD_CMT)   ON DELETE CASCADE,
  CONSTRAINT FK_COD_USU_SINALIZADO_NOT FOREIGN KEY (COD_USU_SINALIZADO) REFERENCES usuario (COD_USU),
  CONSTRAINT FK_COD_USU_SINALIZAR_NOT FOREIGN KEY (COD_USU_SINALIZAR) REFERENCES usuario (COD_USU)
)



--TABELA RANKING USUÁRIO

CREATE TABLE ranking_usuario (
  COD_RNK INT NOT NULL IDENTITY(1,1),
  COD_USU INT NOT NULL,
  PTS_USU INT NOT NULL,
  DT_RNK DATE NOT NULL,
  PRIMARY KEY (COD_RNK),
  CONSTRAINT FKF_COD_USU_RNK FOREIGN KEY (COD_USU) REFERENCES usuario (COD_USU)  ON DELETE CASCADE ON UPDATE CASCADE
)

--
-- Estrutura da tabela usuario
--
*/

INSERT INTO comentario_noticia (COD_CMT, TXT_CMT, DT_CMT, COD_USU, COD_NOT) VALUES
(10, 'parabéns.', '2011-10-26', 1, 1),
(11, 'cvcxvsdfsdf', '2011-11-01', 1, 23),
(12, 'cvcxvsdfsdf', '2011-11-01', 1, 23),
(13, 'cvcxvsdfsdf', '2011-11-01', 1, 23),
(14, '1', '2011-11-01', 1, 23),
(15, '1', '2011-11-01', 1, 23),
(16, '1', '2011-11-01', 1, 23),
(17, '1', '2011-11-01', 1, 23),
(18, 'asdasd', '2011-11-01', 1, 14),
(19, 'agora foi!!!!!!!!', '2011-11-01', 1, 14),
(20, 'testeasdas', '2011-11-02', 1, 23),
(21, 'hsdgasd', '2011-11-02', 1, 22),
(22, 'hsdgasd', '2011-11-02', 1, 22),
(23, 'hsdgasd', '2011-11-02', 1, 22),
(24, 'hsdgasd', '2011-11-02', 1, 22),
(25, 'hsdgasd', '2011-11-02', 1, 22),
(26, 'hsdgasd', '2011-11-02', 1, 22);